options: 
  delimiter: ;
  encoding: UTF-8
downloader:
  type: s3
  bucket: dito-integration-files
  object_key: naked_base-eventos_v2.csv
id_header: cpf
id_type: cpf
group_by: 
  distinct_id: id_transacao
  sort_id: id_transacao
message_id_fields: 
  flat: 
    - id_transacao
    - sku
  grouped: 
    - id_transacao
mapping: 
  identify:
    grouped: 
      reserved: 
        - from: cpf
          to: id
        - from: email
          to: email
          format: 
            name: email
        - from: nome
          to: name
        - from: cidade
          to: city
        - from: data_compra
          to: created_at
          format:
            name: timestamp
            params: 
              - '%Y-%M-%D %H:%M:%SZ'
              - '%Y-%M-%D %H:%M:%S -0300'
      data: 
        - from: telefone
          to: phone
        - from: uf
          to: uf
        - from: endereco
          to: street
        - from: bairro
          to: neighborhood
        - from: uf
          to: state
        - from: cep
          to: cep
  track: 
    flat:
      reserved:
        - to: action
          default: comprou-produto
        - from: cpf
          to: id
        - from: data_compra
          to: created_at
          format:
            name: timestamp
            params: 
              - '%Y-%M-%D %H:%M:%SZ'
              - '%Y-%M-%D %H:%M:%S -0300'
      data:
        - from: quantidade
          to: quantidade_produtos
        - from: categorias_produto
          to: categorias_produto
        - from: nome_produto
          to: nome_produto
        - from: preco_produto
          to: preco_produto
        - from: marca
          to: marca
        - from: sku
          to: sku
        - from: id_transacao
          to: id_transacao
    grouped: 
      reserved:
        - to: action
          default: comprou
        - from: cpf
          to: cpf
        - from: data_compra
          to: created_at
          format:
            name: timestamp
            params: 
              - '%Y-%M-%D %H:%M:%SZ'
              - '%Y-%M-%D %H:%M:%S -0300'
      data: 
        - from: id_transacao
          to: id 
        - from: total
          to: total
        - from: subtotal
          to: subtotal
        - from: total_frete
          to: total_frete
        - from: metodo_pagamento
          to: metodo_pagamento


